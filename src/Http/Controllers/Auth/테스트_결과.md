# ë¡œê·¸ì¸/íšŒì›ê°€ì… TDD í…ŒìŠ¤íŠ¸ ê²°ê³¼

## ğŸ“… í…ŒìŠ¤íŠ¸ ì •ë³´
- **í…ŒìŠ¤íŠ¸ ì¼ì‹œ**: 2025-10-05 01:19
- **í…ŒìŠ¤íŠ¸ í™˜ê²½**: Laravel 12, SQLite, JWT ì¸ì¦
- **í…ŒìŠ¤íŠ¸ ë²”ìœ„**: ë¡œê·¸ì¸, íšŒì›ê°€ì…, ê³„ì • ìƒíƒœ, ë³´ì•ˆ ê¸°ëŠ¥

---

## âœ… í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ì¤€ë¹„ ì™„ë£Œ

| ì´ë©”ì¼ | ì´ë¦„ | ìƒíƒœ | ì¸ì¦ | ë¹„ë°€ë²ˆí˜¸ | ìš©ë„ |
|--------|------|------|------|---------|------|
| test-active@test.com | í™œì„±ì‚¬ìš©ì | `active` | âœ… | Password123! | ì •ìƒ ë¡œê·¸ì¸ |
| test-blocked@test.com | ì°¨ë‹¨ì‚¬ìš©ì | `blocked` | âœ… | Password123! | ì°¨ë‹¨ í…ŒìŠ¤íŠ¸ |
| test-pending@test.com | ìŠ¹ì¸ëŒ€ê¸° | `pending` | âœ… | Password123! | ìŠ¹ì¸ ëŒ€ê¸° |
| test-inactive@test.com | ë¹„í™œì„±ê³„ì • | `inactive` | âœ… | Password123! | ë¹„í™œì„±í™” |
| test-unverified@test.com | ë¯¸ì¸ì¦ì‚¬ìš©ì | `active` | âŒ | Password123! | ë¯¸ì¸ì¦ |

---

## ğŸ“Š Phase 1: ê¸°ë³¸ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸ (P0)

### âœ… TC-001: ì •ìƒ ë¡œê·¸ì¸ (Active + Verified)

**ì‚¬ìš©ì**: `test-active@test.com`

**ì‹¤í–‰ ëª…ë ¹ì–´**:
```bash
php artisan auth:user-info test-active@test.com
```

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. âœ… http://localhost:8000/login ì ‘ì†
2. âœ… ë¡œê·¸ì¸ í¼ í‘œì‹œ í™•ì¸
3. âœ… ì´ë©”ì¼ ì…ë ¥: test-active@test.com
4. âœ… ë¹„ë°€ë²ˆí˜¸ ì…ë ¥: Password123!
5. âœ… ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­

**ì˜ˆìƒ ê²°ê³¼**:
- [x] JWT í† í° ìƒì„± ë° ì¿ í‚¤ ì €ì¥
- [x] /home í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
- [x] jwt.auth ë¯¸ë“¤ì›¨ì–´ í†µê³¼
- [x] ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ í‘œì‹œ

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”

---

### âœ… TC-002: ì°¨ë‹¨ëœ ê³„ì • ë¡œê·¸ì¸ (Blocked)

**ì‚¬ìš©ì**: `test-blocked@test.com`

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. â³ http://localhost:8000/login ì ‘ì†
2. â³ ì´ë©”ì¼ ì…ë ¥: test-blocked@test.com
3. â³ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥: Password123!
4. â³ ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­

**ì˜ˆìƒ ê²°ê³¼**:
- [x] "ì°¨ë‹¨ëœ ê³„ì •ì…ë‹ˆë‹¤" ì—ëŸ¬ ë©”ì‹œì§€
- [x] ë¡œê·¸ì¸ ì‹¤íŒ¨
- [x] ì°¨ë‹¨ í™”ë©´ í‘œì‹œ (ì„¤ì •ëœ ê²½ìš°)

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”

---

### âœ… TC-003: ìŠ¹ì¸ ëŒ€ê¸° ê³„ì • ë¡œê·¸ì¸ (Pending)

**ì‚¬ìš©ì**: `test-pending@test.com`

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. â³ ì´ë©”ì¼ ì…ë ¥: test-pending@test.com
2. â³ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥: Password123!
3. â³ ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­

**ì˜ˆìƒ ê²°ê³¼**:
- [x] "ê´€ë¦¬ì ìŠ¹ì¸ ëŒ€ê¸° ì¤‘" ë©”ì‹œì§€
- [x] ë¡œê·¸ì¸ ì‹¤íŒ¨
- [x] ìŠ¹ì¸ ëŒ€ê¸° í™”ë©´ í‘œì‹œ

**ìŠ¹ì¸ í›„ ì¬í…ŒìŠ¤íŠ¸**:
```bash
php artisan auth:user-status test-pending@test.com active
# ë‹¤ì‹œ ë¡œê·¸ì¸ â†’ âœ… ì„±ê³µ ì˜ˆìƒ
```

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”

---

### âœ… TC-004: ë¹„í™œì„±í™” ê³„ì • ë¡œê·¸ì¸ (Inactive)

**ì‚¬ìš©ì**: `test-inactive@test.com`

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. â³ ì´ë©”ì¼ ì…ë ¥: test-inactive@test.com
2. â³ ë¡œê·¸ì¸ ì‹œë„

**ì˜ˆìƒ ê²°ê³¼**:
- [x] "ë¹„í™œì„±í™”ëœ ê³„ì •ì…ë‹ˆë‹¤" ë©”ì‹œì§€
- [x] ë¡œê·¸ì¸ ì‹¤íŒ¨

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”

---

### âœ… TC-005: ì´ë©”ì¼ ë¯¸ì¸ì¦ ê³„ì • ë¡œê·¸ì¸ (Unverified)

**ì‚¬ìš©ì**: `test-unverified@test.com`

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. â³ ì´ë©”ì¼ ì…ë ¥: test-unverified@test.com
2. â³ ë¡œê·¸ì¸ ì‹œë„

**ì˜ˆìƒ ê²°ê³¼**:
- [x] "ì´ë©”ì¼ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤" ë©”ì‹œì§€
- [x] ì¸ì¦ ì•ˆë‚´ í™”ë©´ í‘œì‹œ
- [x] ì¬ë°œì†¡ ë§í¬ í‘œì‹œ

**ì¸ì¦ í›„ ì¬í…ŒìŠ¤íŠ¸**:
```bash
php artisan auth:email-verify test-unverified@test.com
# ë‹¤ì‹œ ë¡œê·¸ì¸ â†’ âœ… ì„±ê³µ ì˜ˆìƒ
```

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”

---

## ğŸ“Š Phase 2: ê³„ì • ì ê¸ˆ í…ŒìŠ¤íŠ¸ (P0-P1)

### âœ… TC-101: 5íšŒ ì‹¤íŒ¨ ì‹œ 1ë‹¨ê³„ ì ê¸ˆ

**ì¤€ë¹„**:
```bash
php artisan auth:user-create locktest@test.com --name="ì ê¸ˆí…ŒìŠ¤íŠ¸"
php artisan auth:email-verify locktest@test.com
```

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. â³ ì´ë©”ì¼: locktest@test.com
2. â³ ë¹„ë°€ë²ˆí˜¸: WrongPassword (í‹€ë¦° ë¹„ë°€ë²ˆí˜¸)
3. â³ 5íšŒ ì—°ì† ì‹œë„

**ì˜ˆìƒ ê²°ê³¼**:
- [x] 1-4íšŒ: "ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜"
- [x] 5íšŒì§¸: "5íšŒ ì´ìƒ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì˜ëª» ì…ë ¥í•˜ì—¬ 15ë¶„ê°„ ë¡œê·¸ì¸ì´ ì œí•œë©ë‹ˆë‹¤"
- [x] ì ê¸ˆ ë ˆë²¨ 1 ì ìš©

**ê²€ì¦**:
```bash
php artisan auth:user-info locktest@test.com
# ì˜ˆìƒ: ğŸ”’ ê³„ì • ì ê¸ˆ ì •ë³´, ì‹¤íŒ¨ íšŸìˆ˜: 5íšŒ
```

**í•´ì œ í…ŒìŠ¤íŠ¸**:
```bash
php artisan auth:lockout-reset locktest@test.com
# ë‹¤ì‹œ ì˜¬ë°”ë¥¸ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸ â†’ âœ… ì„±ê³µ ì˜ˆìƒ
```

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”

---

## ğŸ“Š Phase 3: íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸ (P0)

### âœ… TC-301: ì •ìƒ íšŒì›ê°€ì…

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. â³ http://localhost:8000/register ì ‘ì†
2. â³ ì´ë¦„: ì‹ ê·œíšŒì›
3. â³ ì´ë©”ì¼: newuser@test.com
4. â³ ë¹„ë°€ë²ˆí˜¸: Password123!
5. â³ ë¹„ë°€ë²ˆí˜¸ í™•ì¸: Password123!
6. â³ ì•½ê´€ ë™ì˜ ì²´í¬
7. â³ íšŒì›ê°€ì… ë²„íŠ¼ í´ë¦­

**ì˜ˆìƒ ê²°ê³¼**:
- [x] ê³„ì • ìƒì„± ì„±ê³µ
- [x] users í…Œì´ë¸”ì— ì €ì¥
- [x] user_profiles í…Œì´ë¸”ì— ì €ì¥
- [x] "íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤" ë©”ì‹œì§€
- [x] /login ë¦¬ë‹¤ì´ë ‰íŠ¸ (ë˜ëŠ” ì´ë©”ì¼ ì¸ì¦ ì•ˆë‚´)

**ê²€ì¦**:
```bash
php artisan auth:user-info newuser@test.com
# ê³„ì • ì •ë³´ í‘œì‹œë˜ë©´ ì„±ê³µ
```

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”

---

### âœ… TC-302: ì¤‘ë³µ ì´ë©”ì¼ íšŒì›ê°€ì…

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. â³ http://localhost:8000/register ì ‘ì†
2. â³ ì´ë©”ì¼: test-active@test.com (ê¸°ì¡´ ì´ë©”ì¼)
3. â³ ë‚˜ë¨¸ì§€ ì •ë³´ ì…ë ¥
4. â³ íšŒì›ê°€ì… ë²„íŠ¼ í´ë¦­

**ì˜ˆìƒ ê²°ê³¼**:
- [x] "ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤" ì—ëŸ¬
- [x] í¼ ìœ ì§€ (ì…ë ¥ê°’ ìœ ì§€)
- [x] ê³„ì • ìƒì„± ì•ˆ ë¨

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”

---

### âœ… TC-303: ì•½ê´€ ë¯¸ë™ì˜ íšŒì›ê°€ì…

**í…ŒìŠ¤íŠ¸ ì ˆì°¨**:
1. â³ http://localhost:8000/register ì ‘ì†
2. â³ ëª¨ë“  ì •ë³´ ì…ë ¥
3. â³ ì•½ê´€ ì²´í¬ ì•ˆ í•¨
4. â³ íšŒì›ê°€ì… ë²„íŠ¼ í´ë¦­

**ì˜ˆìƒ ê²°ê³¼**:
- [x] "í•„ìˆ˜ ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”" ì—ëŸ¬
- [x] ê³„ì • ìƒì„± ì•ˆ ë¨

**ì‹¤ì œ ê²°ê³¼**: â³ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”

---

## ğŸ“Š í…ŒìŠ¤íŠ¸ ì§„í–‰ ìƒí™©

### ì¤€ë¹„ ì™„ë£Œ í•­ëª©
- [x] ì½˜ì†” ëª…ë ¹ì–´ 8ê°œ ìƒì„±
- [x] í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì 5ëª… ìƒì„±
- [x] ê³„ì • ìƒíƒœ ì„¤ì • ì™„ë£Œ
- [x] ì´ë©”ì¼ ì¸ì¦ ìƒíƒœ ì„¤ì • ì™„ë£Œ
- [x] í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì‘ì„±
- [x] ì„¤ì • íŒŒì¼ env() ì œê±°

### ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš” í•­ëª© (ë¸Œë¼ìš°ì €)
- [ ] TC-001: ì •ìƒ ë¡œê·¸ì¸
- [ ] TC-002: ì°¨ë‹¨ ê³„ì •
- [ ] TC-003: ìŠ¹ì¸ ëŒ€ê¸°
- [ ] TC-004: ë¹„í™œì„±í™”
- [ ] TC-005: ë¯¸ì¸ì¦
- [ ] TC-101: ê³„ì • ì ê¸ˆ
- [ ] TC-301: ì •ìƒ íšŒì›ê°€ì…
- [ ] TC-302: ì¤‘ë³µ ì´ë©”ì¼
- [ ] TC-303: ì•½ê´€ ë¯¸ë™ì˜

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

### ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ ì‹¤í–‰
1. ê°œë°œ ì„œë²„ ì‹¤í–‰: `php artisan serve`
2. http://localhost:8000/login ì ‘ì†
3. ê° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰
4. ê²°ê³¼ë¥¼ ì´ ë¬¸ì„œì— ê¸°ë¡

### ìë™í™” í…ŒìŠ¤íŠ¸ ì‘ì„± (í–¥í›„)
- Feature í…ŒìŠ¤íŠ¸ ì‘ì„± (`tests/Feature/Auth/`)
- ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸
- íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸
- ê³„ì • ìƒíƒœ í…ŒìŠ¤íŠ¸
- PHPUnit ì‹¤í–‰

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ë©”ëª¨

### í™˜ê²½ ì„¤ì •
- `AUTH_METHOD`: jwt
- `LOCKOUT_ENABLE`: true
- `SHARDING_ENABLE`: false (í…ŒìŠ¤íŠ¸ìš©)
- `TWO_FACTOR_ENABLE`: false
- `SOCIAL_AUTH_ENABLE`: false

### ì•Œë ¤ì§„ ì´ìŠˆ
- UserCreateCommandì˜ `--verified` ì˜µì…˜ì´ ì‘ë™í•˜ì§€ ì•ŠìŒ
  - í•´ê²°: `auth:email-verify` ëª…ë ¹ì–´ë¡œ ìˆ˜ë™ ì¸ì¦
- í…Œì´ë¸” ì»¬ëŸ¼ëª…: `status` â†’ `account_status`
  - í•´ê²°: ëª¨ë“  ëª…ë ¹ì–´ì—ì„œ `account_status` ì‚¬ìš©

---

## ğŸ”„ í…ŒìŠ¤íŠ¸ ë°˜ë³µ ì‹¤í–‰

### ë¹ ë¥¸ ë¦¬ì…‹
```bash
# 1. í…ŒìŠ¤íŠ¸ ë°ì´í„° ì‚­ì œ
php artisan tinker --execute="\App\Models\User::where('email', 'like', '%@test.com')->delete();"

# 2. ì ê¸ˆ í•´ì œ
php artisan auth:lockout-reset "" --all

# 3. ì„¸ì…˜ ì •ë¦¬
php artisan auth:session-clear --expired

# 4. ìºì‹œ í´ë¦¬ì–´
php artisan cache:clear
php artisan config:clear
php artisan view:clear
```

### ì¬ìƒì„±
```bash
# ìœ„ì˜ "1ë‹¨ê³„: í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ìƒì„±" ìŠ¤í¬ë¦½íŠ¸ ì¬ì‹¤í–‰
```
