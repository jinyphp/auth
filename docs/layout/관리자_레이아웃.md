# 관리자 레이아웃

JinyAuth 패키지의 관리자 인터페이스 레이아웃 시스템 가이드입니다.

## 개요

관리자 레이아웃은 반응형 디자인을 기반으로 데스크탑과 모바일 환경에서 최적화된 사용자 경험을 제공합니다.

### 주요 특징

- **반응형 디자인**: 데스크탑/모바일 환경에 맞춘 UI
- **이중 햄버거 메뉴**: 모바일에서 사이드바와 사용자 메뉴 분리
- **오프캔버스 메뉴**: 모바일 사용자 메뉴 및 네비게이션
- **스크롤 지원**: 긴 메뉴 내용 처리

---

## 레이아웃 구조

### 기본 HTML 구조

```blade
<!doctype html>
<html lang="ko">
<head>
    <!-- Meta, CSS -->
    @vite('resources/css/bootstrap/app.css')
</head>
<body>
    <div id="db-wrapper">
        <!-- 사이드바 -->
        @include('jiny-auth::partials.admin.sidebar')
        
        <!-- 메인 콘텐츠 -->
        <main id="page-content">
            @include('jiny-auth::partials.admin.header')
            @yield('content')
        </main>
    </div>
    
    <!-- Scripts -->
    <script src="{{ asset('assets/js/theme.min.js') }}"></script>
</body>
</html>
```

### 주요 컴포넌트

| 컴포넌트 | 파일 경로 | 설명 |
|---------|----------|------|
| 레이아웃 | `resources/views/layouts/admin/sidebar.blade.php` | 기본 레이아웃 템플릿 |
| 헤더 | `resources/views/partials/admin/header.blade.php` | 상단 네비게이션 바 |
| 사이드바 | `resources/views/partials/admin/sidebar.blade.php` | 왼쪽 메뉴 |

---

## 반응형 동작

### 데스크탑 (≥768px)

**네비게이션**:
- 왼쪽 햄버거 버튼 (☰): 사이드바 토글
- 메가 메뉴: 드롭다운으로 표시
- 사용자 메뉴: 알림 + 아바타 인라인 표시

**사이드바**:
- 기본적으로 표시
- 햄버거 클릭 시 숨김/표시 토글
- `#db-wrapper.toggled` 클래스로 제어

### 모바일 (<768px)

**네비게이션**:
- 왼쪽 햄버거 (☰): 사이드바 토글
- 오른쪽 햄버거 (⋮): 오프캔버스 사용자 메뉴

**오프캔버스 메뉴**:
- 사용자 정보
- 메가 메뉴 (Auth, CMS, Store 관리)
- 알림, 프로필, 설정, 로그아웃

---

## 사용 방법

### 1. 기본 레이아웃 적용

컨트롤러에서 레이아웃을 지정합니다:

```php
namespace App\Http\Controllers\Admin;

class DashboardController extends Controller
{
    public function index()
    {
        return view('admin.dashboard');
    }
}
```

뷰 파일에서 레이아웃을 확장합니다:

```blade
@extends('jiny-auth::layouts.admin.sidebar')

@section('title', '대시보드')

@section('content')
    <div class="container-fluid p-4">
        <h1>관리자 대시보드</h1>
        <!-- 콘텐츠 -->
    </div>
@endsection
```

### 2. 사이드바 메뉴 커스터마이징

`resources/views/partials/admin/sidebar.blade.php`를 수정하여 메뉴를 추가/변경할 수 있습니다:

```blade
<li class="nav-item">
    <a class="nav-link" href="/admin/custom">
        <i class="nav-icon fe fe-star me-2"></i>
        커스텀 메뉴
    </a>
</li>
```

### 3. 헤더 메가 메뉴 추가

`resources/views/partials/admin/header.blade.php`의 메가 메뉴 섹션을 수정합니다:

```blade
<!-- 새로운 섹션 추가 -->
<div class="mega-menu-column">
    <div class="mega-menu-header">
        <i class="fe fe-box text-info"></i>
        <span class="text-info">새 섹션</span>
    </div>
    <div class="mega-menu-items">
        <a href="/admin/new" class="mega-menu-item">
            <i class="fe fe-circle"></i>
            <span>새 메뉴</span>
        </a>
    </div>
</div>
```

---

## CSS 클래스

### 반응형 클래스

| 클래스 | 설명 |
|--------|------|
| `d-none d-lg-flex` | 데스크탑(≥992px)에서만 표시 |
| `d-lg-none` | 모바일(<992px)에서만 표시 |
| `d-none d-md-none d-lg-block` | 데스크탑에서만 블록 표시 |

### 레이아웃 클래스

| 클래스 | 설명 |
|--------|------|
| `#db-wrapper` | 메인 래퍼 컨테이너 |
| `#db-wrapper.toggled` | 사이드바 숨김 상태 |
| `#page-content` | 메인 콘텐츠 영역 |
| `.navbar-vertical` | 사이드바 네비게이션 |

### 커스텀 스타일

`resources/css/bootstrap/app.css`에서 추가 스타일을 정의할 수 있습니다:

```css
/* 커스텀 햄버거 버튼 스타일 */
#nav-toggle:hover {
    background-color: #f3f4f6;
}

/* 오프캔버스 커스텀 */
.offcanvas-body {
    overflow-y: auto;
}
```

---

## JavaScript 동작

### 사이드바 토글

`theme.min.js`가 자동으로 처리합니다:

```javascript
// 자동으로 처리됨
document.getElementById('nav-toggle').addEventListener('click', function() {
    document.getElementById('db-wrapper').classList.toggle('toggled');
});
```

### 오프캔버스 메뉴

Bootstrap 5의 오프캔버스 컴포넌트를 사용합니다:

```html
<button data-bs-toggle="offcanvas" data-bs-target="#mobileUserMenu">
    메뉴 열기
</button>

<div class="offcanvas offcanvas-end" id="mobileUserMenu">
    <!-- 오프캔버스 내용 -->
</div>
```

---

## 커스터마이징 예제

### 예제 1: 사이드바 메뉴 그룹 추가

```blade
{{-- 새 메뉴 그룹 --}}
<li class="nav-item">
    <div class="navbar-heading">새 섹션</div>
</li>

<li class="nav-item">
    <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" 
       data-bs-target="#navNewSection" aria-expanded="false">
        <i class="nav-icon fe fe-layers me-2"></i>
        새 메뉴 그룹
    </a>
    <div id="navNewSection" class="collapse" data-bs-parent="#sideNavbar">
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link" href="/admin/new/item1">
                    서브 메뉴 1
                </a>
            </li>
        </ul>
    </div>
</li>
```

### 예제 2: 헤더에 커스텀 버튼 추가

```blade
{{-- 데스크탑 검색 바 옆에 버튼 추가 --}}
<div class="ms-3 d-none d-lg-block">
    <a href="/admin/settings" class="btn btn-primary">
        <i class="fe fe-settings me-2"></i>
        설정
    </a>
</div>
```

### 예제 3: 오프캔버스 메뉴에 섹션 추가

```blade
{{-- 오프캔버스 body 내부에 추가 --}}
<div class="border-top p-3">
    <h6 class="text-uppercase text-muted mb-3">추가 기능</h6>
    <a href="/admin/reports" class="d-block py-2 text-decoration-none text-dark">
        <i class="fe fe-bar-chart me-2"></i>
        리포트
    </a>
</div>
```

---

## 문제 해결

### 사이드바가 토글되지 않음

**원인**: `theme.min.js`가 로드되지 않았거나 `#db-wrapper` ID가 없음

**해결**:
1. `theme.min.js`가 올바르게 로드되었는지 확인
2. HTML 구조에서 `<div id="db-wrapper">` 확인
3. 브라우저 콘솔에서 JavaScript 에러 확인

### 모바일 오프캔버스가 열리지 않음

**원인**: Bootstrap JavaScript가 로드되지 않았거나 버튼 속성 오류

**해결**:
1. `bootstrap.bundle.min.js`가 로드되었는지 확인
2. 버튼에 `data-bs-toggle="offcanvas"` 속성 확인
3. `data-bs-target` 값이 오프캔버스 ID와 일치하는지 확인

### 스크롤이 작동하지 않음

**원인**: CSS `overflow` 속성 누락

**해결**:
```css
.offcanvas-body {
    overflow-y: auto;
    max-height: calc(100vh - 70px);
}
```

---

## 참고 자료

- [Bootstrap 5 Offcanvas](https://getbootstrap.com/docs/5.3/components/offcanvas/)
- [Bootstrap 5 Navbar](https://getbootstrap.com/docs/5.3/components/navbar/)
- [Feather Icons](https://feathericons.com/)

---

## 버전 히스토리

### v1.1.0 (2025-01-22)
- 모바일 이중 햄버거 메뉴 시스템 추가
- 오프캔버스 사용자 메뉴 구현
- 반응형 UI 개선
- 스크롤 지원 추가

### v1.0.0
- 초기 관리자 레이아웃 구현
- 사이드바 네비게이션
- 기본 헤더 구조
